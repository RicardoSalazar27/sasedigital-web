if(function(){const e=document.getElementById("contact-form");if(!e)return;const t=document.getElementById("form-note"),n={nombre:e.querySelector("#c-name"),correo:e.querySelector("#c-email"),telefono:e.querySelector("#c-phone"),empresa:e.querySelector("#c-company"),interes:e.querySelector("#c-service"),mensaje:e.querySelector("#c-message"),consentimiento:e.querySelector(".check__input"),trampa:e.querySelector('input[name="_gotcha"]')},r=/^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/i;function o(e,t){const n=e.closest(".form__group")||e.closest(".check");if(!n)return;n.classList.add("is-invalid"),e.setAttribute("aria-invalid","true");const r=function(e){const t=e.closest(".form__group")||e.closest(".check");if(!t)return null;let n=t.querySelector(".form__error");return n||(n=document.createElement("small"),n.className="form__error",n.hidden=!0,t.appendChild(n)),n}(e);r&&(r.textContent=t,r.hidden=!1)}function a(e){const t=e.closest(".form__group")||e.closest(".check");if(!t)return;t.classList.remove("is-invalid"),e.removeAttribute("aria-invalid");const n=t.querySelector(".form__error");n&&(n.hidden=!0)}e.addEventListener("input",(function(e){const t=e.target;return t===n.nombre?t.value.trim().length>=2?a(t):o(t,"Escribe tu nombre (mínimo 2 caracteres)."):t===n.correo?r.test(t.value.trim())?a(t):o(t,"Correo inválido."):t===n.mensaje?t.value.trim().length>=10?a(t):o(t,"Mínimo 10 caracteres."):t===n.interes?"0"!==t.value?a(t):o(t,"Selecciona una opción."):void 0})),e.addEventListener("change",(function(e){e.target===n.consentimiento&&(n.consentimiento.checked?a(n.consentimiento):o(n.consentimiento,"Debes aceptar el contacto."))})),e.addEventListener("submit",(async function(i){if(i.preventDefault(),n.trampa&&n.trampa.value)return e.reset(),void(t&&(t.hidden=!1,t.textContent="Gracias."));if(!function(){let e=!0;n.nombre.value.trim().length>=2?a(n.nombre):(e=!1,o(n.nombre,"Escribe tu nombre (mínimo 2 caracteres)."));const t=n.correo.value.trim();return r.test(t)?a(n.correo):(e=!1,o(n.correo,"Ingresa un correo válido.")),n.mensaje.value.trim().length>=10?a(n.mensaje):(e=!1,o(n.mensaje,"Escribe un mensaje (mínimo 10 caracteres).")),n.interes&&("0"!==n.interes.value?a(n.interes):(e=!1,o(n.interes,"Selecciona una opción."))),n.consentimiento&&n.consentimiento.checked?a(n.consentimiento):(e=!1,o(n.consentimiento,"Debes aceptar el contacto.")),e}()){const t=e.querySelector(".is-invalid input, .is-invalid select, .is-invalid textarea");return void(t&&t.focus())}const s=new FormData(e);if(s.set("name",n.nombre.value.trim()),s.set("email",n.correo.value.trim()),s.set("message",n.mensaje.value.trim()),s.set("phone",n.telefono.value.trim()),s.set("company",n.empresa.value.trim()),n.interes){const e=n.interes.options[n.interes.selectedIndex];s.set("service_id",n.interes.value),s.set("service_text",e?e.text:"")}s.set("consent",n.consentimiento.checked?"1":"0"),s.set("referrer",window.location.href);const c=new URLSearchParams;for(const[e,t]of s.entries())c.append(e,String(t));const l=e.querySelector('button[type="submit"]'),d=l?l.innerHTML:"";l&&(l.disabled=!0,l.innerHTML='<i class="fa-solid fa-spinner fa-spin"></i> Enviando…');try{const n=await fetch("/api/contacto",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:c.toString(),credentials:"same-origin"});if(!n.ok)throw new Error("Error HTTP "+n.status);let r=null;try{r=await n.json()}catch(e){}e.reset(),t&&(t.hidden=!1,t.textContent=r&&r.message?r.message:"Gracias, recibimos tu mensaje.")}catch(e){t&&(t.hidden=!1,t.textContent="No pudimos enviar tu mensaje. Inténtalo de nuevo en unos minutos.")}finally{l&&(l.disabled=!1,l.innerHTML=d)}}))}(),(()=>{if("/"!==window.location.pathname)return;document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",t=>{const n=e.getAttribute("href");if(!n||"#"===n)return;const r=document.querySelector(n);r&&(t.preventDefault(),r.scrollIntoView({behavior:"smooth"}))})});const e=document.getElementById("navToggle"),t=document.getElementById("navLinks");e&&t&&e.addEventListener("click",()=>{const n="true"===e.getAttribute("aria-expanded");e.setAttribute("aria-expanded",String(!n)),t.classList.toggle("nav__links--open"),t.setAttribute("aria-hidden",String(n))}),document.querySelectorAll(".nav__dropdown").forEach(e=>{const t=e.querySelector(".nav__btn");t&&t.addEventListener("click",t=>{t.stopPropagation();const n="true"===e.getAttribute("aria-expanded");e.setAttribute("aria-expanded",String(!n))})}),document.addEventListener("click",e=>{document.querySelectorAll('.nav__dropdown[aria-expanded="true"]').forEach(t=>{t.contains(e.target)||t.setAttribute("aria-expanded","false")})});const n=document.getElementById("hero-canvas");if(!n)return;const r=n.getContext("2d");let o=n.width=window.innerWidth,a=n.height=window.innerHeight;const i=["#2584f8","#04ddb2","#a4caff","#f2f6fc"],s=[];for(let e=0;e<100;e++)s.push({x:Math.random()*o,y:Math.random()*a,vx:.7*(Math.random()-.5),vy:.7*(Math.random()-.5),radius:2*Math.random()+1,color:i[Math.floor(Math.random()*i.length)],alpha:Math.random(),delta:.02*Math.random()});!function e(){r.clearRect(0,0,o,a),s.forEach(e=>{e.x+=e.vx,e.y+=e.vy,(e.x<0||e.x>o)&&(e.vx*=-1),(e.y<0||e.y>a)&&(e.vy*=-1),e.alpha+=e.delta,(e.alpha<=0||e.alpha>=1)&&(e.delta*=-1),r.beginPath(),r.arc(e.x,e.y,e.radius,0,2*Math.PI),r.fillStyle=`rgba(${function(e){const t=parseInt(e.replace("#",""),16);return`${t>>16&255},${t>>8&255},${255&t}`}(e.color)},${e.alpha})`,r.fill()});for(let e=0;e<100;e++)for(let t=e+1;t<100;t++){const n=s[e].x-s[t].x,o=s[e].y-s[t].y,a=Math.hypot(n,o);if(a<140){r.beginPath(),r.moveTo(s[e].x,s[e].y),r.lineTo(s[t].x,s[t].y);const n=.5*(1-a/140);r.strokeStyle=`rgba(4,221,178,${n})`,r.lineWidth=.7,r.stroke()}}requestAnimationFrame(e)}(),window.addEventListener("resize",()=>{o=n.width=window.innerWidth,a=n.height=window.innerHeight});const c=document.getElementById("navLinks"),l=document.getElementById("navToggle"),d=window.matchMedia("(min-width: 768px)");function m(e){c.classList.toggle("is-open",e),l.setAttribute("aria-expanded",String(e)),c.setAttribute("aria-hidden",String(!e)),document.body.classList.toggle("no-scroll",e)}l.addEventListener("click",()=>m(!c.classList.contains("is-open"))),c.querySelectorAll("a.nav__link").forEach(e=>{e.addEventListener("click",()=>{d.matches||m(!1)})}),c.querySelectorAll(".nav__dropdown > .nav__btn").forEach(e=>{e.addEventListener("click",e=>{const t=e.currentTarget.closest(".nav__dropdown"),n="true"===t.getAttribute("aria-expanded");t.parentElement.querySelectorAll(".nav__dropdown").forEach(e=>e.setAttribute("aria-expanded","false")),t.setAttribute("aria-expanded",String(!n))})}),document.addEventListener("keydown",e=>{"Escape"===e.key&&m(!1)}),d.addEventListener("change",()=>{d.matches&&m(!1)})})(),"/productos"===window.location.pathname){const e=window.matchMedia("(prefers-reduced-motion: reduce)").matches;function prepararAnimaciones(){const e=document.querySelector(".prod__hero .container");e&&(e.classList.add("animable","anim--arriba"),e.style.setProperty("--anim-retardo","80ms")),document.querySelectorAll(".prod__bullets .bullet").forEach((e,t)=>{e.classList.add("animable","anim--arriba"),e.style.setProperty("--i",t)}),document.querySelectorAll(".prod__features .card").forEach((e,t)=>{e.classList.add("animable","anim--escala"),e.style.setProperty("--i",t)}),document.querySelectorAll(".prod__flow .flow li").forEach((e,t)=>{e.classList.add("animable","anim--arriba"),e.style.setProperty("--i",t)}),document.querySelectorAll(".prod__gallery .gal").forEach((e,t)=>{e.classList.add("animable","anim--escala"),e.style.setProperty("--i",t)});const t=document.querySelector(".prod__cta .container");t&&(t.classList.add("animable","anim--arriba"),t.style.setProperty("--anim-retardo","100ms"))}function observarYRevelar(){if(e||!("IntersectionObserver"in window))return void document.querySelectorAll(".animable").forEach(e=>e.classList.add("esta-visible"));const t=new IntersectionObserver(e=>{for(const n of e)n.isIntersecting&&(n.target.classList.add("esta-visible"),t.unobserve(n.target))},{rootMargin:"0px 0px -10% 0px",threshold:.1});document.querySelectorAll(".animable").forEach(e=>t.observe(e))}function parallaxHero(){if(e)return;const t=document.querySelector(".prod__hero-media");if(!t)return;let n=null;function r(){n=null;const e=window.scrollY||window.pageYOffset||0,r=Math.max(0,Math.min(180,e));t.style.setProperty("--parallax",.12*r+"px")}window.addEventListener("scroll",()=>{n||(n=requestAnimationFrame(r))},{passive:!0}),r()}prepararAnimaciones(),observarYRevelar(),window.addEventListener("load",()=>{document.querySelectorAll(".prod__hero .container, .prod__hero-media").forEach(e=>e.classList.add("esta-visible"))}),parallaxHero()}
//# sourceMappingURL=bundle.js.map
